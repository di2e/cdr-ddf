<?xml version="1.0" encoding="UTF-8"?>
<!--
/**
 * Copyright (c) Cohesive Integrations, LLC
 *
 * This is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation, either version 3 of the License, or any later version. 
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied
 * warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more
 * details. A copy of the GNU Lesser General Public License is distributed along with this program and can be found at
 * <http://www.gnu.org/licenses/lgpl.html>.
 * 
 **/
 -->
<metatype:MetaData xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.osgi.org/xmlns/metatype/v1.2.0 http://www.osgi.org/xmlns/metatype/v1.2.0"
    xmlns:metatype="http://www.osgi.org/xmlns/metatype/v1.2.0">

    <OCD
        description="CDR Specification v3.0 compliant REST Federated Source.  Use this when federating to another DDF based CDR Service.  If federating to a non DDF CDR or 
    OpenSearch source use the OpenSearch Federated Source configuration"
        name="CDR REST Federated Source" id="ecdr-rest-source">

        <AD name="Source Name" id="id" required="true" type="String" default="cdr-source" />

        <AD name="CDR Endpoint URL" id="url" required="true" type="String" default="http://localhost:8181/services/cdr/search/rest" />

        <AD name="Response Timeout" id="receiveTimeoutSeconds" required="true" type="Integer" default="0"
            description="Number of seconds that the client will wait for a response before it times out. The default is 0 (wait indefinitely). 
            0 specifies that the client will wait indefinitely." />

        <AD name="Connection Timeout" id="connectionTimeoutSeconds" required="true" type="Integer" default="30"
            description="Number of seconds that the client will attempt to establish a connection before it times out. The default is 30 seconds. 
            0 specifies that the client will continue to attempt to open a connection indefinitely." />

        <AD name="Max Result Count" id="maxResultCount" required="true" type="Integer" default="0"
            description="The maximum number of records to return. If a client specifies a larger value that value will be overriden with this value.  0 or empty means no override." />

        <AD name="Check Availability" id="doSourcePing" type="Boolean" default="true"
            description="Check the box if you want to get site status by using the HTTP HEAD method to the base URL" />

        <AD name="Minimum Source Ping Interval" id="availableCheckCacheTime" required="true" type="Integer" default="60"
            description="The minimum time interval (in seconds) between source availability checks.  Source status will be pulled from cache if the minimum time has not passed." />

        <AD name="Local Override" id="localOverride" required="false" type="Boolean" default="true"
            description="Certain runtime registries may wish to update this source when the source value in the registry changes (or is removed).  If this box is checked, once the source is created
            it cannot be automatically updated or removed by a registry.  If uncertain keep checked.">
        </AD>
        <AD name="Sort Mapping" id="sortMap" required="false" type="String" default="title:entry/title,modified:entry/date,RELEVANCE:score" cardinality="100"
            description="Mapping for this source that converts the metacard attribute to a sort type for the outgoing request. The mapping should be done by using &lt;metacard attribute&gt;:&lt;cdr
            type&gt; format.">
        </AD>

    </OCD>

    <Designate pid="ecdr-rest-source" factoryPid="ecdr-rest-source">
        <Object ocdref="ecdr-rest-source" />
    </Designate>
</metatype:MetaData>
